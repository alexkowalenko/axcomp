import lit.formats
import os

config.name = "Oberon Compile and Run"
config.test_format = lit.formats.ShTest(True)
config.suffixes = [".mod", ".Mod"]
config.tools_root = r'@CMAKE_CURRENT_SOURCE_DIR@/../bin'

config.output = r'@CMAKE_CURRENT_BINARY_DIR@'
config.test_exec_root = r'/tmp'
config.pipefail = False

run_helper = r'@CMAKE_CURRENT_BINARY_DIR@/lit_run.py'
ax_tool = os.path.join(config.tools_root, 'ax')

config.substitutions.append(('%comp', f'{run_helper} %T {ax_tool} -m --run'))
config.substitutions.append(('%ax', f'{run_helper} %T {ax_tool}'))
